<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>User Management</title>
</head>

<body>
<header>
    <nav>
        <ul>
            <li>
                <img src="./logo.png" alt="Logo" />
            </li>
            <li>
                <span id="xworkz">XWORKZ</span>
            </li>
            <li>
                <a href="#"><button>HOME</button></a>
            </li>
            <li>
                <a href="#" id="nxtpage"><button id="nextPage">Next Page</button></a>
            </li>
        </ul>
    </nav>
</header>
<div id="form-container">
    <form action="userDetails"  method="post" id="userForm" onsubmit="enableDisableSubmitButton()">
        <table>
            <tr>
                <td>
                    <label>First Name :</label>
                </td>
                <td>
                    <input type="text" placeholder="Enter First Name" name="fname" id="fname"
                           onblur="validateFname()" onchange="onchange('fnameError')"
                           oninput="hideError('fnameError')" /><br />
                    <span class="error-message" id="fnameError">Please enter valid first name</span>
                </td>
                <td>
                    <label>Middle Name :</label>
                </td>
                <td>
                    <input type="text" placeholder="Enter Middle Name" name="mname" id="mname"
                           onblur="validateMname()" onchange="onchange('mnameError')"
                           oninput="hideError('mnameError')" />
                    <br /><span class="error-message" id="mnameError">Please enter valid middle name</span>
                </td>
                <td>
                    <label>Last Name : </label>
                </td>
                <td>
                    <input type="text" placeholder="Enter Last Name" name="lname" id="lname"
                           onblur="validateLname()" onchange="onchange('lnameError')"
                           oninput="hideError('lnameError')" />
                    <br /><span class="error-message" id="lnameError">Please enter valid last name</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label>Address : </label>
                </td>
                <td>
                    <input type="text" placeholder="House No" name="houseNo" id="houseNo" onblur="validateHno()"
                           onchange="onchange('houseNoError')" oninput="hideError('houseNoError')" />
                    <br /><span class="error-message" id="houseNoError">Please provide correct house no</span>
                </td>
                <td>
                    <label>Street : </label>
                </td>
                <td>
                    <input type="text" placeholder="street name/no" name="street" id="street"
                           onblur="validateStreet()" onchange="onchange('streetError')"
                           oninput="hideError('streetError')" />
                    <br /><span class="error-message" id="streetError">Please provide valid street</span>
                </td>
                <td>
                    <label>City : </label>
                </td>
                <td>
                    <select name="city" id="city">
                        <!-- <option value>---SELECT CITY---</option> -->
                        <option value="bengaluru">Bengaluru</option>
                        <option value="mangalore">Mangalore</option>
                        <option value="hassan">Hassan</option>
                        <option value="mandya">Mandya</option>
                        <option value="davangere">Davangere</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label>District : </label>
                </td>
                <td>
                    <select name="district" id="district">
                        <!-- <option value>---SELECT DISTRICT---</option> -->
                        <option value="burban">Bengaluru Urban</option>
                        <option value="brural">Bengaluru Rural</option>
                        <option value="mangalore">Mangalore</option>
                        <option value="hassan">Hassan</option>
                        <option value="mandya">Mandya</option>
                        <option value="davangere">Davangere</option>
                    </select>
                </td>
                <td>
                    <label>State : </label>
                </td>
                <td>
                    <select name="state" id="state">
                        <!-- <option value>---SELECT STATE---</option> -->
                        <option value="karnataka">Karnataka</option>
                        <option value="tamilnadu">Tamil Nadu</option>
                        <option value="kerala">Kerala</option>
                        <option value="telangana">Telangana</option>
                        <option value="andhra">Andra Pradesh</option>
                        <option value="goa">Goa</option>
                    </select>
                </td>
                <td>
                    <label>Pincode : </label>
                </td>
                <td>
                    <input type="text" name="pincode" id="pincode" onblur="validatePinCode()"
                           onchange="onchange('pincodeError')" oninput="hideError('pincodeError')" />
                    <br /><span class="error-message" id="pincodeError">Please provide valid pincode</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label>Gender : </label>
                </td>
                <td colspan="6" style="text-align: left">
                    &nbsp;&nbsp;
                    <input type="radio" name="gender" id="male" value="male" checked />Male
                    <input type="radio" name="gender" id="female" value="female" />Female
                    <input type="radio" name="gender" id="others" value="others" />Others <br /><span
                        class="error-message" id="genderError">Please select a gender</span>
                </td>
            </tr>
            <tr>
                <td colspan="6" style="text-align: center">
                    <input type="checkbox" name="agree" id="agree" onclick="enableDisableSubmitButton()" />
                    I agree that all the information provided is correct <br /><span class="error-message"
                                                                                     id="agreeError">Please check the checkbox</span>
                </td>
            </tr>
            <tr>
                <td colspan="3" style="text-align: right">
                    <div class="buttons">
                        <input type="submit" value="SUBMIT" name="submit" id="submit" onclick="register()" disabled/>
                        <br /><span class="error-message" id="submitError"></span>
                    </div>
                </td>
                <td colspan="3" style="text-align: left">
                    <div class="buttons">
                        <input type="reset" value="RESET" name="reset" id="reset" onclick="onChange()" />
                    </div>
                </td>
            </tr>
        </table>
    </form>
</div>
<div id="foot">
    <footer>
        &copy;Ullas G<br />
        &nbsp;&nbsp;&nbsp;Software Developer
    </footer>
</div>

<script type="text/javascript">
        document.getElementById("agree").addEventListener("change", function () {
            if (this.checked) {
                enableDisableSubmitButton();
            }
        });
        function validateFname() {
            console.log("validate Fname");
            var firstName = document.getElementById("fname").value;
            var firstNameError = document.getElementById("fnameError");

            if (
                firstName.trim() === "" ||
                firstName.length < 4 ||
                firstName.length > 15
            ) {
                console.log("fnname error 1");
                firstNameError.innerHTML = "Enter minimum 4 characters";
                document.getElementById("fname").style.border = "2px solid red";
                firstNameError.style.display = "inline";
                return false;
            }
            else {
                if (/^[a-zA-Z]+[^0-9]*$/.test(firstName.value)) {
                    console.log("First name valid");
                    // firstNameError.innerHTML="Enter only letters"
                    document.getElementById("fname").style.border = "2px solid green";
                    firstNameError.innerHTML = "Name is valid";
                    firstNameError.style.display = "none";
                    return true;
                }
                console.log("first name error 2");
                firstNameError.innerHTML = "Enter only letters";
                document.getElementById("fname").style.border = "2px solid red";
                firstNameError.style.display = "inline";
                return false;
            }
        }
        function validateMname() {
            console.log("validate Mname");
            var middleName = document.getElementById("mname").value;
            var middleNameError = document.getElementById("mnameError");
            if (
                middleName.trim() === "" ||
                middleName.length < 1 ||
                middleName.length > 10
            ) {
                document.getElementById("mname").style.border = "2px solid red";
                middleNameError.style.display = "inline";
                return false;
            }
            else {
                document.getElementById("mname").style.border = "2px solid green";
                middleNameError.style.display = "none";
                return true;
            }
        }
        function validateLname() {
            console.log("validate Lname");
            var lastName = document.getElementById("lname").value;
            var lastNameError = document.getElementById("lnameError");
            if (
                lastName.trim() === "" ||
                lastName.length < 3 ||
                lastName.length > 15
            ) {
                lastNameError.style.display = "inline";
                document.getElementById("lname").style.border = "2px solid red";
                return false;
            }
            else {
                document.getElementById("lname").style.border = "2px solid green";
                lastNameError.style.display = "none";
                return true;
            }
        }
        function validateHno() {
            console.log("validate HouseNo");
            var houseNumber = document.getElementById("houseNo");
            var houseNumberError = document.getElementById("houseNoError");
            var regex = /^[0-9]+[A-Za-z]*$/;
            if (!regex.test(houseNumber.value.trim())) {
                houseNumberError.style.display = "inline";
                document.getElementById("houseNo").style.border = "2px solid red";
                return false;
            } else {
                document.getElementById("houseNo").style.border = "2px solid green";
                houseNumberError.style.display = "none";
                return true;
            }
        }
        function validateStreet() {
            console.log("validate street");
            var street = document.getElementById("street").value;
            var streetNameError = document.getElementById("streetError");
            if (street.trim() === "" || street.length < 4) {
                streetNameError.style.display = "inline";
                document.getElementById("street").style.border = "2px solid red";
                return false;
            } else {
                document.getElementById("street").style.border = "2px solid green";
                streetNameError.style.display = "none";
                return true;
            }
        }
        function validatePinCode() {
            console.log("validate pincode");
            var pincode = document.getElementById("pincode");
            var pincodeError = document.getElementById("pincodeError");
            var regex = /^[0-9]{6}$/;
            if (!regex.test(pincode.value.trim())) {
                pincodeError.style.display = "inline";
                document.getElementById("pincode").style.border = "2px solid red";
                return false;
            } else {
                document.getElementById("pincode").style.border = "2px solid green";
                pincodeError.style.display = "none";
                return true;
            }
        }

        function enableDisableSubmitButton() {
            if (
                validateFname() &&
                validateMname() &&
                validateLname() &&
                validateHno() &&
                validateStreet() &&
                validatePinCode()
            ) {
                document.getElementById("submit").disabled = false;
            } else {
                onchange();
                document.getElementById('submit').disabled = true;
            }
        }
        function onChange() {
            document.getElementById('submit').disabled = true;
            document.getElementById('agree').checked = false;
        }

        function hideError(elementId) {
            var errorElement = document.getElementById(elementId);
            errorElement.style.display = 'none';
        }

        function register() {
            var firstName = document.getElementById("fname").value;
            var middleName = document.getElementById("mname").value;
            var lastName = document.getElementById("lname").value;
            var houseNo = document.getElementById("houseNo").value;
            var street = document.getElementById("street").value;
            var city = document.getElementById("city").value;
            var district = document.getElementById("district").value;
            var state = document.getElementById("state").value;
            var pincode = document.getElementById("pincode").value;

            var genders = document.getElementsByName('gender');
            var checkedGender;
            for (var gender of genders) {
                if (gender.checked) {
                    checkedGender = gender.value;
                }
            }
            let object = { fname: firstName, mname: middleName, lname: lastName, houseNo: houseNo, street: street, city: city, district: district, state: state, pincode: pincode, gender: checkedGender };
            let afterconvert = JSON.stringify(object);
            window.localStorage.setItem("register", afterconvert);

            let getting = localStorage.getItem("register");
            let object1 = JSON.parse(getting);
            console.log(object1);
        }
    </script>
</body>

</html>